(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{277:function(t,e,n){var content=n(298);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("493cb7ce",content,!0,{sourceMap:!1})},297:function(t,e,n){"use strict";n(277)},298:function(t,e,n){var o=n(20)(!1);o.push([t.i,"main #beatViewer[data-v-8a7ed2d0]{flex:4 0 0;display:flex;flex-direction:column;justify-content:center;align-items:center}main #beatViewer #beatCircle[data-v-8a7ed2d0]{width:3em;height:3em;border-radius:1.5em;background-color:#1e90ff;transform-origin:50% 50%}main #bpmViewer[data-v-8a7ed2d0]{flex:2 0 0;display:flex;flex-direction:column;justify-content:center;align-items:center}main #bpmViewer #bpmTextWrapper[data-v-8a7ed2d0]{color:#fff;font-size:3em}main #bpmViewer #clickTextWrapper[data-v-8a7ed2d0]{color:#fff;font-size:1.5em}main #controller[data-v-8a7ed2d0]{flex:7 0 0;display:flex;flex-direction:column;justify-content:center;align-items:center}main #controller #beatButton[data-v-8a7ed2d0]{flex:0 0 8em;width:8em;color:#00bfff;background-color:rgba(0,191,255,.2);border:3px solid #00bfff;border-radius:4em;font-size:1.5em;text-align:center;vertical-align:middle;line-height:8em;transition:border-color 1s ease-out}main #controller #beatButton.active[data-v-8a7ed2d0]{transition:border-color 0s;border-color:rgba(0,191,255,.2)}main #controller #beatButton[data-v-8a7ed2d0]:focus{outline:none}",""]),t.exports=o},305:function(t,e,n){"use strict";n.r(e);var o,r,c,d,h,l,f,v=n(18),m=n(32),w=(n(291),n(295),n(29),n(13),n(26),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}),B=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},y=function(){function t(e,n,m){var y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.95;if(Object(v.a)(this,t),o.set(this,void 0),r.set(this,void 0),c.set(this,void 0),d.set(this,void 0),h.set(this,!0),l.set(this,0),f.set(this,0),w(this,d,x),w(this,o,new Float64Array(m)),1<B(this,o).length)for(var k=y?B(this,o).length-1:B(this,o).length,M=0;M<B(this,o).length;M++){var E=((k-M)*e+M*n)/k;B(this,o)[M]=E}else B(this,o)[0]=e;w(this,r,new Float64Array(B(this,o).length)),w(this,c,new Float64Array(B(this,o).length))}return Object(m.a)(t,[{key:"numOfBpsBins",get:function(){return B(this,o).length}},{key:"isReset",get:function(){return B(this,h)}},{key:"estimatedBps",get:function(){return B(this,l)}},{key:"estimatedAnchorTimeInSeconds",get:function(){return B(this,f)}},{key:"beat",value:function(t){var e=2*Math.PI*t;if(B(this,h)){w(this,h,!1);for(var n=0;n<B(this,o).length;n++){var v=e*B(this,o)[n];B(this,r)[n]=Math.cos(v),B(this,c)[n]=Math.sin(v)}}else for(var m=0;m<B(this,o).length;m++){var y=e*B(this,o)[m];B(this,r)[m]=B(this,d)*B(this,r)[m]+(1-B(this,d))*Math.cos(y),B(this,c)[m]=B(this,d)*B(this,c)[m]+(1-B(this,d))*Math.sin(y)}for(var x=-1/0,k=0,M=0,E=0;E<B(this,o).length;E++){var T=Math.pow(B(this,c)[E],2)+Math.pow(B(this,r)[E],2);if(x<T){var C=B(this,o)[E];x=T,k=C,M=Math.atan2(B(this,c)[E],B(this,r)[E])/(2*Math.PI*C)}}w(this,l,k),w(this,f,M)}},{key:"reset",value:function(){w(this,h,!0)}}]),t}();o=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,l=new WeakMap,f=new WeakMap;var x={beatEstimator:null,resetTimerId:null,data:function(){var t=this.$store.state.configure.bpmRange.min,e=this.$store.state.configure.bpmRange.max,n=this.$store.state.configure.bpmPrecision,o=new y(t/60,e/60,1+Math.round((e-t)*Math.pow(10,n)),!0);return this.$options.beatEstimator=o,{bps:o.estimatedBps,beatCount:0,beatPhase:0,bpmPrecision:n,isBeatButtonActive:!1}},computed:{beatButtonText:function(){return 0==this.beatCount?"Beat":"".concat(this.beatCount)}},mounted:function(){var t=this;this.$nextTick((function e(){t.updateBeatCircleScale(),requestAnimationFrame(e)}))},beforeMount:function(){window.addEventListener("keydown",this.windowKeydownEventListener),window.addEventListener("keyup",this.windowKeyUpEventListener)},beforeDestroy:function(){window.removeEventListener("keydown",this.windowKeydownEventListener),window.removeEventListener("keyup",this.windowKeyUpEventListener)},methods:{activateBeatButton:function(){var t=this.$options.beatEstimator;0==this.beatCount&&t.reset(),t.beat(performance.now()/1e3),this.bps=t.estimatedBps,++this.beatCount,this.isBeatButtonActive=!0;var e=this.$options.resetTimerId;null!=e&&clearTimeout(e),this.$options.resetTimerId=setTimeout(this.resetBeatEstimator,2e3)},deactivateBeatButton:function(){this.isBeatButtonActive=!1},resetBeatEstimator:function(){var t=this.$options.beatEstimator;this.$options.resetTimerId=null,t.reset(),this.beatCount=0},updateBeatCircleScale:function(){var t=this.$options.beatEstimator,e=t.estimatedBps,n=t.estimatedAnchorTimeInSeconds,o=(performance.now()/1e3-n)*e%1;o<0&&(o+=(function(t){throw new TypeError('"'+t+'" is read-only')}("phase"),1)),this.beatPhase=o},windowKeydownEventListener:function(t){switch(t.preventDefault(),t.code){case"Space":this.activateBeatButton()}},windowKeyUpEventListener:function(t){switch(t.preventDefault(),t.code){case"Space":this.deactivateBeatButton()}}}},k=(n(297),n(67)),M=n(100),E=n.n(M),T=n(273),component=Object(k.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 d-flex flex-column align-stretch",attrs:{fluid:"","fill-height":""}},[n("div",{attrs:{id:"beatViewer"}},[n("div",{style:{opacity:1-.7*t.beatPhase},attrs:{id:"beatCircle"}})]),t._v(" "),n("div",{attrs:{id:"bpmViewer"}},[0<t.bps?n("div",{attrs:{id:"bpmTextWrapper"}},[t._v("\n      "+t._s((60*t.bps).toFixed(t.bpmPrecision))+"\n      "),n("span",{staticClass:"display-1"},[t._v("BPM")])]):n("div",{attrs:{id:"clickTextWrapper"}},[t._v("\n      "+t._s(t.$t("pages.index.ClickBeatButtonOrPressSpaceKey"))+"\n    ")])]),t._v(" "),n("div",{attrs:{id:"controller"},on:{mousedown:function(e){return e.preventDefault(),t.activateBeatButton(e)},mouseup:function(e){return e.preventDefault(),t.deactivateBeatButton(e)},touchstart:function(e){return e.preventDefault(),t.activateBeatButton(e)},touchend:function(e){return e.preventDefault(),t.deactivateBeatButton(e)}}},[n("div",{class:{active:t.isBeatButtonActive},attrs:{id:"beatButton"}},[t._v("\n      "+t._s(t.beatButtonText)+"\n    ")])])])}),[],!1,null,"8a7ed2d0",null);e.default=component.exports;E()(component,{VContainer:T.a})}}]);